(this["webpackJsonpchaser-gui"]=this["webpackJsonpchaser-gui"]||[]).push([[0],{127:function(e,t,n){e.exports={switch:"CheckboxGroup_switch__110xu",right:"CheckboxGroup_right__PtWaV"}},128:function(e,t,n){e.exports={cat:"Category_cat__1OQqw",err:"Category_err__3OT8i"}},134:function(e,t,n){},169:function(e,t,n){e.exports={sticky:"DashPage_sticky__1agxd",chart:"DashPage_chart__1Yoyh"}},172:function(e,t,n){e.exports={button:"SettingsButtons_button__2Xh6m"}},182:function(e,t,n){e.exports=n(323)},200:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},319:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){"use strict";n.r(t);var a,r,c,l,o=n(0),s=n.n(o),i=n(16),u=n.n(i),d=n(28),m=n(103),h=n(163),p=n(26),b={},v={dataBars:{type:"value",persistent:!0,initValue:1e3},displayBars:{type:"value",persistent:!0,initValue:100},devMode:{type:"value",persistent:!0,initValue:!1}},f={connectionId:{type:"value",persistent:!0,initValue:1},connections:{type:"collection",persistent:!0},connectionsCnt:{type:"view",sourceName:"connections",props:[],recipe:function(e,t){return Object(p.Seq)({cnt:e.count()})}},error:{type:"value",persistent:!1,initValue:null},runs:{type:"collection",persistent:!1},runsCnt:{type:"formula",props:["runs"],recipe:function(e){return e.runs.count()}},runsView:{type:"view",sourceName:"runs",props:[],recipe:function(e,t){return e.sort((function(e,t){var n=t.get("runId");if(n){var a=e.get("runId");return parseInt(n)-parseInt(a)}return 0}))}},runsLog:{type:"collection",persistent:!1},keys:{type:"collection",persistent:!1},keysCnt:{type:"formula",props:["keys"],recipe:function(e){return e.keys.count()}},messages:{type:"collection",persistent:!1},messagesView:{type:"view",sourceName:"messages",props:[],recipe:function(e,t){return e},recipe0:function(e,t){return e.sort((function(e,t){var n=e.get("componentName");if(n){var a=n.localeCompare(t.get("componentName"));if(0!==a)return a}var r=e.getIn(["common","contract","name"]);if(r){var c=r.localeCompare(t.getIn(["common","contract","name"]));if(0!==c)return c}var l=e.getIn(["common","item"]);if(l){var o=l.localeCompare(t.getIn(["common","item"]));if(0!==o)return o}return 0}))}}},g={args:{type:"value",persistent:!1,initValue:Object(p.fromJS)(function(e){e||(e=location.search);var t=e.substr(1),n={};return t&&t.split("&").forEach((function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])})),n}())},selectedTabIndex:{type:"value",persistent:!0,initValue:0},home:{type:"schema",schema:b},connections:{type:"schema",schema:f},settings:{type:"schema",schema:v}},E=["home","dash","connections","settings","credits","debug"],y=function(e,t,n){var a=I().get("args"),r=a.get("tab");if("true"===a.get("reset"))return window.confirm("This will clear all PoserJS saved data. Are you sure?")&&(B(S.init(n)),A()),void window.history.replaceState({},document.title,"/");try{if(r)for(var c=0;c<E.length;c++)r===E[c]&&B(S.value("selectedTabIndex",c));A()}catch(l){console.log("INIT ERROR:",l)}};setInterval((function(){try{if(a===c&&r===l)return;var e=C.liveState(l),t=C.persistableState(e),n=JSON.stringify(t);localStorage.setItem(c,n),a=c,r=l}catch(o){console.log("DUXEN ERROR: persistState: ",o)}}),1e3);var k,w=n(3),O=function(e){return e&&"object"===typeof e&&!Array.isArray(e)},j=function e(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];if(!a.length)return t;var c=a.shift();if(O(t)&&O(c))for(var l in c)O(c[l])?(t[l]||Object.assign(t,Object(w.a)({},l,{})),e(t[l],c[l])):Object.assign(t,Object(w.a)({},l,c[l]));return e.apply(void 0,[t].concat(a))},C=Object(h.createEngine)(g),S=C.actionFactory(),x=function(e){var t=e.repoReducer(),n=Object(m.b)(t);k=e.head(n.getState());var a=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}}("poserjs:0.0.2");if(a){var r=j(k.toJS(),a);n.dispatch(e.actionFactory().init(r))}return n.dispatch(e.actionFactory().refresh()),n}(C),B=function(e){return x.dispatch(e)},I=function(){return C.head(x.getState())},A=function(){return x.subscribe((function(){return function(e,t){c=e,l=t}("poserjs:0.0.2",x.getState())}))};y(C,x,k);n(200);var R=n(8),N=n(9),M=n(10),F=n(11),T=n(12),_={fontSize:20,color:"white",padding:"0px"},W=function(e){return s.a.createElement("div",{style:_},"Chaser")},D=n(30),J=C.subEngine("home"),L=C.subEngine("connections"),V=C.subEngine("settings"),P=Object(d.b)((function(e,t){return J.get(J.head(e)),n=L.get(L.head(e)),{devMode:V.get(V.head(e)).get("devMode"),runsCnt:n.get("runsCnt"),runs:n.get("runsView"),keys:n.get("keys")};var n}),(function(e,t){return{}})),G=n(82),U=n.n(G),z=(n(134),function(e,t){return t.get("twsTimeMs")-e.get("twsTimeMs")}),q=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(M.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(r)))).renderCnt=0,n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.keys.get("0:TwsErrorsLog::");return this.renderCnt++,s.a.createElement("div",null,this.props.devMode?s.a.createElement("b",null,"RenderCnt: ",this.renderCnt):null,s.a.createElement("p",null),s.a.createElement("h3",null,"Runs (",this.props.runsCnt,")"),s.a.createElement("p",null),s.a.createElement("table",{style:{maxWidth:"100%"},className:"minimalistBlack"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"RunID"),s.a.createElement("th",null,"Time"),s.a.createElement("th",null,"Replay"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,this.props.runs.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.get("runId")),s.a.createElement("td",null,e.get("time")),s.a.createElement("td",null,e.getIn(["options","replayMode"])),s.a.createElement("td",null,e.get("status")))})).toSetSeq())),s.a.createElement("p",null),s.a.createElement("h3",null,"Errors (",e?e.size:"",")"),s.a.createElement("table",{style:{maxWidth:"100%"},className:"minimalistBlack"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"RunId"),s.a.createElement("th",null,"Time"),s.a.createElement("th",null,"Type"),s.a.createElement("th",null,"Subscription"),s.a.createElement("th",null,"Error"))),s.a.createElement("tbody",null,e?e.sort(z).map((function(e,t){var n=e.get("subscription");return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.get("runId")),s.a.createElement("td",null,e.get("twsTime")),s.a.createElement("td",null,e.get("type")),s.a.createElement("td",null,n&&n.getIn(["contract","name"]),n&&":"+n.getIn(["item"]),n&&" ("+n.getIn(["contract","secType"])+"-"+n.getIn(["contract","exchange"])+"-"+n.getIn(["contract","currency"])+")"),s.a.createElement("td",{style:{maxWidth:600}},e.get("errorMsg").substr(0,200).replace(/\//g," / ")))})).toSetSeq():null)))}}]),t}(o.Component),X=C.subEngine("home"),Y=C.subEngine("connections"),H=C.subEngine("settings"),$=Object(d.b)((function(e,t){return X.get(X.head(e)),n=Y.get(Y.head(e)),{devMode:H.get(H.head(e)).get("devMode"),keysCnt:n.get("keysCnt"),messages:n.get("messagesView"),keys:n.get("keys")};var n}),(function(e,t){return{}})),K=n(88),Q=n(35),Z=n(129),ee=n(165),te=n(126),ne=n(84),ae=n(166),re=n(167),ce=(n(248),n(7)),le=function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.data,a=e.width,r=e.ratio,c=ae.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return e.date}))(n),l=c.data,o=c.xScale,i=c.xAccessor,u=c.displayXAccessor,d=[i(Object(ce.last)(l)),i(l[Math.max(0,l.length-150)])];return s.a.createElement(Z.b,{height:160,ratio:r,width:a,margin:{left:40,right:80,top:10,bottom:30},type:t,seriesName:"Chaser",data:l,xScale:o,xAccessor:i,displayXAccessor:u,xExtents:d,style:{position:"relative"}},s.a.createElement(Z.a,{id:1,yExtents:[function(e){return[e.high,e.low]}],padding:{top:40,bottom:20}},s.a.createElement(te.XAxis,{axisAt:"bottom",orient:"bottom"}),s.a.createElement(te.YAxis,{axisAt:"right",orient:"right",ticks:5}),s.a.createElement(ne.MouseCoordinateX,{rectWidth:60,at:"bottom",orient:"bottom",displayFormat:Object(Q.b)("%H:%M:%S")}),s.a.createElement(ne.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(K.b)(".2f")}),s.a.createElement(ee.CandlestickSeries,null),s.a.createElement(ne.EdgeIndicator,{itemType:"last",orient:"right",edgeAt:"right",displayFormat:Object(K.b)("7,.2f"),rectWidth:80,yAccessor:function(e){return e.close},fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"}}),s.a.createElement(re.OHLCTooltip,{origin:[-40,0],xDisplayFormat:Object(Q.b)("%Y-%m-%d %H:%M:%S")})),s.a.createElement(ne.CrossHairCursor,null))}}]),t}(s.a.Component);le.defaultProps={type:"svg"};var oe=le,se=n(168),ie=n.n(se),ue=n(169),de=n.n(ue),me=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(M.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(r)))).renderCnt=0,n.cache={},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;this.renderCnt++;var t=this.props.messages.get("0:TwsTime::");return s.a.createElement("div",null,this.props.devMode?s.a.createElement("b",null,"RenderCnt: ",this.renderCnt):null,s.a.createElement("p",null),"Keys Count: ",this.props.keysCnt,s.a.createElement("p",null),"TWS Time: ",t&&t.get("twsTime"),s.a.createElement("p",null),this.props.keys.filter((function(e,t){return t.startsWith("0:")&&!t.endsWith("::")&&e.size>1})).sortBy((function(e,t){var n=t.split(":");return n[2]+":"+n[3]+":"+n[1]+":"+n[0]})).slice(0,1e3).map((function(t,n){var a=e.cache[n];if(a||(a={data:null,updateCnt:0},e.cache[n]=a),a.data===t)return a.obj;a.updateCnt++,a.data=t;var r=t.slice(t.size>5?t.size-5:0,t.size).toJS().map((function(e){return{date:new Date(e.timeMs),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}})),c=s.a.createElement("div",{key:n,className:de.a.chart},s.a.createElement("p",null,n," (",a.updateCnt,")"),s.a.createElement("div",null,s.a.createElement(oe,{width:380,ratio:1,data:r})));return a.obj=c,c})).toSetSeq())}}]),t}(o.Component),he=ie()(250)(me),pe=C.subEngine("settings"),be=pe.actionFactory(),ve=Object(d.b)((function(e,t){return n=pe.get(pe.head(e)),pe.head(e),{dataBars:n.get("dataBars"),displayBars:n.get("displayBars"),devMode:n.get("devMode")};var n}),(function(e,t){return{setDataBars:function(t){e(be.value("dataBars",t))},setDisplayBars:function(t){e(be.value("displayBars",t))},setDevMode:function(t){e(be.value("devMode",t))}}})),fe=n(38),ge={10:{value:10,label:"10"},50:{value:50,label:"50"},100:{value:100,label:"100"},500:{value:500,label:"500"},1e3:{value:1e3,label:"1,000"},5e3:{value:5e3,label:"5,000"},1e4:{value:1e4,label:"10,000"},5e4:{value:5e4,label:"50,000"},1e5:{value:1e5,label:"100,000"},5e5:{value:5e5,label:"500,000"},1e6:{value:1e6,label:"1,000,000"}},Ee=n(104),ye=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(M.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){n.props.setDataBars(e.value)},n.customStyles={option:function(e,t){return Object(fe.a)({},e,{textAlign:"right"})},control:function(e){return Object(fe.a)({},e)},singleValue:function(e,t){return Object(fe.a)({},e)}},n.options=[],Object.keys(ge).map((function(e){return n.options.push(ge[e])})),n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=ge[this.props.dataBars.toString()];return s.a.createElement("div",{style:{width:150}},s.a.createElement(Ee.a,{styles:this.customStyles,value:e,onChange:this.handleChange,options:this.options}))}}]),t}(o.Component),ke={1:{value:1,label:"1"},2:{value:2,label:"2"},3:{value:3,label:"3"},4:{value:4,label:"4"},5:{value:5,label:"5"},10:{value:10,label:"10"},15:{value:15,label:"15"},20:{value:20,label:"20"},25:{value:25,label:"25"},50:{value:50,label:"50"},75:{value:75,label:"75"},100:{value:100,label:"100"},250:{value:250,label:"250"},500:{value:500,label:"500"},1e3:{value:1e3,label:"1,000"},5e3:{value:5e3,label:"5,000"},1e4:{value:1e4,label:"10,000"},5e4:{value:5e4,label:"50,000"},1e5:{value:1e5,label:"100,000"},5e5:{value:5e5,label:"500,000"},1e6:{value:1e6,label:"1,000,000"}},we=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(M.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){n.props.setDisplayBars(e.value)},n.customStyles={option:function(e,t){return Object(fe.a)({},e,{textAlign:"right"})},control:function(e){return Object(fe.a)({},e)},singleValue:function(e,t){return Object(fe.a)({},e)}},n.options=[],Object.keys(ke).map((function(e){return n.options.push(ke[e])})),n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=ke[this.props.displayBars.toString()];return s.a.createElement("div",{style:{width:150}},s.a.createElement(Ee.a,{styles:this.customStyles,value:e,onChange:this.handleChange,options:this.options}))}}]),t}(o.Component),Oe=n(171),je=n.n(Oe),Ce=n(127),Se=n.n(Ce),xe=function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"devModeChange",value:function(e){this.props.setDevMode(e)}},{key:"render",value:function(){var e=this.props;return s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:Se.a.right},"Dev Mode:"),s.a.createElement("td",null,s.a.createElement(je.a,{className:Se.a.switch,onChange:this.devModeChange.bind(this),height:20,width:40,checked:e.devMode})))))}}]),t}(o.Component);function Be(){for(var e=["Edge","Firefox","Safari","Chrome","Opera"],t=navigator.userAgent,n=e.length-1;n>=0;n--){var a=e[n],r=t.indexOf(a);if(r>=0){var c=r+a.length,l=c;return"/"===t[c]&&(c++,(l=t.indexOf(" ",c))<0&&(l=t.length)),a+" "+t.substring(c,l)}}return"Unknown"}function Ie(){try{new Function("async () => {}")()}catch(e){return!1}return!0}var Ae=n(128),Re=n.n(Ae),Ne=function(e){var t;switch(e){case"SF":t="#ff4e4e";break;case"4":t="#cf9cff";break;case"3+2":t="#9c9cff";break;case"F":t="#ff9c9c";break;case"S":t="#9cffff";break;case"3":t="#9cff9c";break;case"2+2":t="#ffcf9c";break;case"2":t="#ffff9c";break;case"1":t="white";break;case"error":t="pink";break;default:t="grey"}return t},Me=function(e){var t;switch(e){case"error":t=Re.a.err;break;default:t=Re.a.cat}return t},Fe=function(e){return s.a.createElement("span",{title:e.category,style:Object(fe.a)({},e.style,{backgroundColor:Ne(e.cat)}),className:Me(e.cat)},"\xa0",e.children,"\xa0")},Te=n(20),_e=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(M.a)(this,Object(F.a)(t).call(this,e))).isMobileDevice="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),n.browserFeatures=function(){var e={name:Be(),language:navigator.language,platform:navigator.platform,hasAsync:Ie(),abortController:!!window.AbortController,webWorker:!!window.Worker,webAssembly:"object"===typeof WebAssembly};return e.isOutdatedBrowser=!(e.hasAsync&&e.abortController&&e.webWorker&&e.webAssembly),e}(),n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,this.browserFeatures.isOutdatedBrowser?s.a.createElement("div",null,s.a.createElement(Fe,{style:{height:36},cat:"error"},s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}),"\xa0 Missing Critical Features \xa0",s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}),s.a.createElement("br",null),"Please Update Your Web Browser"),s.a.createElement("br",null),s.a.createElement("br",null)):null,s.a.createElement("table",{className:"minimalistBlack"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"center"},"Feature"),s.a.createElement("th",{className:"center"},"Value"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"name:"),s.a.createElement("td",{className:"center"},this.browserFeatures.name)),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"language:"),s.a.createElement("td",{className:"center"},this.browserFeatures.language)),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"platform:"),s.a.createElement("td",{className:"center"},this.browserFeatures.platform)),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"mobile:"),s.a.createElement("td",{className:"center"},this.isMobileDevice?"Yes":"No")),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"async/await:"),s.a.createElement("td",{className:"center"},this.browserFeatures.hasAsync?s.a.createElement(Te.a,{color:"green",icon:"check"}):s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}))),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"abort controller:"),s.a.createElement("td",{className:"center"},this.browserFeatures.abortController?s.a.createElement(Te.a,{color:"green",icon:"check"}):s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}))),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"web worker:"),s.a.createElement("td",{className:"center"},this.browserFeatures.webWorker?s.a.createElement(Te.a,{color:"green",icon:"check"}):s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}))),s.a.createElement("tr",null,s.a.createElement("td",{className:"right"},"web assembly:"),s.a.createElement("td",{className:"center"},this.browserFeatures.webAssembly?s.a.createElement(Te.a,{color:"green",icon:"check"}):s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle"}))))))}}]),t}(o.Component),We=n(172),De=n.n(We),Je=function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("a",{href:"?reset=true",title:"Reset App Data",rel:"noopener noreferrer"},s.a.createElement("button",{className:De.a.button},s.a.createElement(Te.a,{icon:"trash-restore"}))))}}]),t}(o.Component),Le=function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props;return s.a.createElement("div",null,s.a.createElement("h3",null,"Settings"),s.a.createElement("h4",null,s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{textAlign:"right"}},"Data Bars:\xa0"),s.a.createElement("td",null,s.a.createElement(ye,e))),s.a.createElement("tr",null,s.a.createElement("td",{style:{textAlign:"right"}},"Display Bars:\xa0"),s.a.createElement("td",null,s.a.createElement(we,e)))))),s.a.createElement("h3",null,"Options"),s.a.createElement("h4",null,s.a.createElement(xe,e)),s.a.createElement("h3",null,"Browser Features"),s.a.createElement("h4",null,s.a.createElement(_e,null)),s.a.createElement("h3",null,"Reset App Data"),s.a.createElement("h4",null,s.a.createElement(Je,null)))}}]),t}(o.Component),Ve=function(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"Links"),s.a.createElement("h3",null,s.a.createElement("a",{href:"https://poserjs.github.io",target:"_blank",rel:"noopener noreferrer"},"PoserJS Online")),s.a.createElement("h3",null,s.a.createElement("a",{href:"https://github.com/poserjs/poserjs.github.io/wiki",target:"_blank",rel:"noopener noreferrer"},"PoserJS Wiki")),s.a.createElement("h3",null,s.a.createElement("a",{href:"https://github.com/poserjs/poserjs.github.io",target:"_blank",rel:"noopener noreferrer"},"PoserJS Github")),s.a.createElement("h2",null,"Credits"),s.a.createElement("h3",null,s.a.createElement("a",{href:"https://facebook.github.io/create-react-app/",target:"_blank",rel:"noopener noreferrer"},"Create React App")),s.a.createElement("h3",null,s.a.createElement("a",{href:"https://fontawesome.com",target:"_blank",rel:"noopener noreferrer"},"Font Awesome")))},Pe=n(43),Ge=n.n(Pe),Ue=n(173),ze=C.subEngine("connections"),qe=ze.actionFactory(),Xe=C.subEngine("settings"),Ye={},He=function(e){e instanceof Error&&(e={tag:null,status:"error",errorMsg:ze.message}),B(qe.value("error",e))},$e=function(e){if("+"===e)return e;var t=e.indexOf("-"),n=parseInt(e.substring(0,t),10),a=parseInt(e.substring(t+1));return 0===a?(--n).toString():(a--,n.toString()+"-"+a.toString())},Ke=function(e,t,n,a,r,c){var l=a?"xrevrange":"xrange",o=a?"+":"-",s=a?"-":"+",i=[],u=n<1e3?n:1e3;e.command("redis",l,[t,o,s,"count",u],(function a(u,d){if(u)return He(u),void(c&&c(u));if("ok"!==d.status)return He(d),void(c&&c(u));try{for(var m=[],h=o,p=0;p<d.result.length;p++){var b=d.result[p];h=b[0];var v=b[1];if("message"!==v[0])return He("Unexpected field name: "+v[0]),void(c&&c(u));var f=v[1],g=JSON.parse(f);i.push(g),m.push(r(g)),n--}if(n>0&&d.result.length>=1e3){h=$e(h);var E=n<1e3?n:1e3;e.command("redis",l,[t,h,s,"count",E],a)}else c&&c(null,i);m.length>0&&B(qe.batch(m))}catch(u){He(u)}}))},Qe=function(e,t,n,a,r,c){var l,o,s,i,u,d;return Ge.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:l=a?"xrevrange":"xrange",o=a?"+":"-",s=a?"-":"+","message",1e3,i=[],u=function u(d,m){if(d)return He(d),void(c&&c(d));if("ok"!==m.status)return He(m),void(c&&c(d));try{for(var h=o,p=0;p<m.result.length;p++){var b=m.result[p];h=b[0];var v=b[1];if("message"!==v[0])return He("Unexpected field name: "+v[0]),void(u&&u(d));var f=v[1],g=JSON.parse(f);i.push(g),n--}if(n>0&&m.result.length>=1e3){h=$e(h);var E=n<1e3?n:1e3;e.command("redis",l,[t,h,s,"count",E],u)}else a&&i.reverse(),B(r(i)),c&&c(null,i)}catch(d){He(d)}},d=n<1e3?n:1e3,e.command("redis",l,[t,o,s,"count",d],u);case 9:case"end":return m.stop()}}))},Ze=function(e){var t=Xe.get(I(),"dataBars");B(qe.reset("runs")),B(qe.reset("runsLog")),B(qe.reset("keys")),B(qe.reset("messages")),function(e,t){Ke(e,"ChaserRuns",t,!0,(function(e){return qe.insert("runs",e.runId,e)}),(function(n,a){n||Ke(e,"ChaserLogs",t,!1,(function(e){return qe.batch([qe.insert("runsLog",e.runId,e),qe.update("runs",e.runId,{$set:{status:e.status}})])}),(function(e,t){}))}))}(e,100),function(e,t){var n,a,r,c;Ge.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Ge.a.awrap(e.commandAsync("redis","keys",["*"]));case 3:n=l.sent,a=n.result,r=function(n){var r=a[n];if("ChaserRunId"===r)return"continue";Qe(e,r,t,!0,(function(e){return qe.insert("keys",r,e)}))},l.t0=Ge.a.keys(a);case 7:if((l.t1=l.t0()).done){l.next=14;break}if(c=l.t1.value,"continue"!==r(c)){l.next=12;break}return l.abrupt("continue",7);case 12:l.next=7;break;case 14:l.next=19;break;case 16:l.prev=16,l.t2=l.catch(0),He(l.t2);case 19:case"end":return l.stop()}}),null,null,[[0,16]])}(e,t),function(e,t){var n,a;Ge.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],a={message:function(e){var t=Object(p.fromJS)(JSON.parse(e.message)),a=qe.insert("messages",e.channel,t);n.push(a);var r=ze.get(I(),"keys").get(e.channel);if(r){if(0===r.size)r=r.push(t);else{var c=r.last();c.get("timeMs")<t.get("timeMs")?r=r.push(t):c.get("timeMs")===t.get("timeMs")&&(r=r.set(-1,t))}var l=qe.insert("keys",e.channel,r);n.push(l)}},flush:function(){B(qe.batch(n)),n.length=0}},t.prev=2,t.next=5,Ge.a.awrap(e.commandAsync("redis","psubscribe",["*"],a));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),He(t.t0);case 10:case"end":return t.stop()}}),null,null,[[2,7]])}(e)},et=function(){return Ge.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:ze.get(I(),"connections").forEach((function(e){var t=e.get("id");if(!Ye[t]){var n={maxSentCommandsCnt:16,timeoutMs:6e4,changeState:function(e){if(Ye[t]){var n,a=qe.update("connections",t,{$set:{state:e}});B(a),"open"===e&&(n=Ye[t],Ge.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:Ze(n);case 3:case"end":return e.stop()}})))}},setMessage:function(e){if(Ye[t]){var n=qe.update("connections",t,{$set:{message:e}});B(n)}}},a=e.get("url");Ye[t]=Object(Ue.createClient)(a,n)}}));case 2:case"end":return e.stop()}}))};et();var tt=Object(d.b)((function(e,t){return n=ze.head(e),{connections:ze.get(n,"connections"),connectionsCnt:ze.get(n,"connectionsCnt")};var n}),(function(e,t){return{addConnection:function(t){var n=ze.get(I(),"connectionId"),a="conn"+n;t=t.set("id",a);var r=qe.value("connectionId",n+1),c=qe.insert("connections",a,t),l=qe.batch([r,c]);e(l),et()},removeConnection:function(t){var n=Ye[t];n&&(delete Ye[t],n.close());var a=qe.remove("connections",t);e(a)}}})),nt=(n(262),function(e){var t,n=e.addConnection;return s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t&&t.value.trim()&&(n(Object(p.fromJS)({url:t.value,state:"created",message:""})),t.value="")}},s.a.createElement("input",{className:"AddConnection-input",ref:function(e){t=e}}),s.a.createElement("button",{className:"AddConnection-input",type:"submit"},s.a.createElement(Te.a,{icon:"plus"})))}),at=(n(263),function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"removeConnection",value:function(e){this.props.removeConnection(e)}},{key:"renderStateIcon",value:function(e){var t;switch(e){case"open":t=s.a.createElement(Te.a,{color:"blue",icon:"wifi",title:"Open"});break;default:t=s.a.createElement(Te.a,{color:"red",icon:"exclamation-triangle",title:"Remove"})}return t}},{key:"renderConnections",value:function(e){var t=this;if(!e)return null;return s.a.createElement("div",null,s.a.createElement("table",{className:"minimalistBlack"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"URL"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,e.map((function(e,n){var a=e.get("state");return s.a.createElement("tr",{key:n},s.a.createElement("td",null,n),s.a.createElement("td",null,s.a.createElement("b",null,e.get("url"),s.a.createElement("br",null),e.get("message"))),s.a.createElement("td",{className:"center"},t.renderStateIcon(a)),s.a.createElement("td",{className:"center"},s.a.createElement("button",{onClick:t.removeConnection.bind(t,n)},s.a.createElement(Te.a,{icon:"trash-alt",title:"Remove"}))))})).toIndexedSeq())))}},{key:"render",value:function(){var e=this.props,t=e.connections,n=e.connectionsCnt,a=e.addConnection;return s.a.createElement("div",null,s.a.createElement("header",null,s.a.createElement("h2",null,"Connections (",n.get("cnt"),")")),s.a.createElement(nt,{addConnection:a}),s.a.createElement("br",null),s.a.createElement("div",null,this.renderConnections(t)))}}]),t}(o.Component)),rt=(n(264),function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"actionToJs",value:function(e){var t,n={};for(t in e){var a=e[t];Object(p.isImmutable)(a)&&(a=a.toJS()),n[t]=a}return n}},{key:"preRender",value:function(){var e=this.props,t=e.state,n=e.action,a=e.repo,r=e.showRepo;return s.a.createElement("div",null,s.a.createElement("header",null,s.a.createElement("h2",null,"State Inspector")),s.a.createElement("div",{className:"TimeMachinePage-body"},r?[s.a.createElement("h4",{key:1},"Repository"),s.a.createElement(U.a,{key:2,name:!1,src:a.toJS()})]:[s.a.createElement("h4",{key:1},"Action"),s.a.createElement(U.a,{key:2,name:!1,collapsed:1,src:this.actionToJs(n)}),s.a.createElement("h4",{key:3},"State"),s.a.createElement(U.a,{key:4,name:!1,collapsed:2,src:t.toJS()})]))}},{key:"render",value:function(){return this.pre||(this.pre=this.preRender()),this.pre}}]),t}(o.Component)),ct=Object(d.b)((function(e,t){var n=t.engine,a=n.currentBranchState(e),r=a.get("currentIndex"),c=a.get("states"),l=r<0?void 0:c.get(r),o=a.get("actions"),s=r<0?void 0:o.get(r),i=r<=0?void 0:c.get(r-1),u=e.getIn(["options","showRepo"]);return{prevState:n.printableState(i),state:n.printableState(l),action:s,repo:e,showRepo:u}}),(function(e,t){return{}}))(rt),lt=n(178),ot=(n(318),n(319),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(M.a)(this,Object(F.a)(t).call(this,e))).state={currentBranch:e.currentBranch,live:e.live,advanced:!1,showRepo:e.showRepo,saveAs:""},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({currentBranch:e.currentBranch,live:e.live,showRepo:e.showRepo})}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"onChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"onChangeBranch",value:function(e){var t=this.props.switchBranch,n=e.target.value;this.setState({currentBranch:n}),t(n)}},{key:"onSaveBranch",value:function(e){var t=this.props.saveBranch;this.state.saveAs&&t(this.state.saveAs),this.setState({saveAs:""})}},{key:"onReset",value:function(e){var t=this.props,n=t.currentBranch;(0,t.resetBranch)(n)}},{key:"onRemove",value:function(e){var t=this.props,n=t.currentBranch;(0,t.removeBranch)(n)}},{key:"onGoFastForward",value:function(e){(0,this.props.goForward)(10)}},{key:"onGoForward",value:function(e){(0,this.props.goForward)(1)}},{key:"onGoBack",value:function(e){(0,this.props.goBack)(1)}},{key:"onGoFastBack",value:function(e){(0,this.props.goBack)(10)}},{key:"onGoLive",value:function(e){(0,this.props.goLive)()}},{key:"toggleLive",value:function(e){var t=this.props,n=t.goBack,a=t.goLive,r=!this.state.live;this.setState({live:r}),r?a():n(0)}},{key:"toggleAdvanced",value:function(e){var t=!this.state.advanced;this.setState({advanced:t})}},{key:"toggleRepo",value:function(e){var t=this.props.doShowRepo,n=!this.state.showRepo;this.setState({showRepo:n}),t(n)}},{key:"onSliderChange",value:function(e){var t=this.props,n=t.goForward,a=t.goBack,r=t.currentIndex,c=e-1;c>r?n(c-r):c<r&&a(r-c)}},{key:"render",value:function(){var e=this.props,t=e.branches,n=e.currentIndex,a=e.maxIndex;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},s.a.createElement("button",{onClick:this.toggleLive.bind(this),title:this.state.live?"Time Machine On":"Time Machine Off"},this.state.live?s.a.createElement(Te.a,{icon:"history"}):s.a.createElement(Te.a,{icon:"play"})),s.a.createElement("button",{onClick:this.toggleAdvanced.bind(this),title:this.state.advanced?"Advanced Mode Off":"Advanced Mode On"},this.state.advanced?s.a.createElement("b",null,"\u2630"):s.a.createElement("span",null,"\u2630")),"\xa0",this.state.advanced?[s.a.createElement("button",{key:1,onClick:this.toggleRepo.bind(this),title:this.state.showRepo?"Show State":"Show Repo"},this.state.showRepo?s.a.createElement(Te.a,{key:2,icon:"genderless"}):s.a.createElement(Te.a,{key:2,icon:"code-branch"})),s.a.createElement("select",{key:3,name:"currentBranch",value:this.state.currentBranch,onChange:this.onChangeBranch.bind(this),title:"Change Branch"},t.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)})).toIndexedSeq())]:null,s.a.createElement("button",{onClick:this.onGoBack.bind(this),title:"Go Back"},"<"),"\xa0",n+1," / ",a+1,"\xa0",s.a.createElement("button",{onClick:this.onGoForward.bind(this),title:"Go Forward"},">"),this.state.advanced?s.a.createElement("span",null,s.a.createElement("input",{name:"saveAs",size:"8",value:this.state.saveAs,onChange:this.onChange.bind(this)}),s.a.createElement("button",{onClick:this.onSaveBranch.bind(this),title:"Save Branch",disabled:!this.state.saveAs},"Save"),s.a.createElement("button",{onClick:this.onReset.bind(this),title:"Reset Branch"},"Reset"),s.a.createElement("button",{onClick:this.onRemove.bind(this),title:"Remove Branch"},"Remove")):null),this.state.live?null:s.a.createElement("div",{className:"TimeMachineControls-slider"},s.a.createElement(lt.a,{min:1,max:a+1,value:n+1,step:1,onChange:this.onSliderChange.bind(this)})))}}]),t}(o.Component)),st=Object(d.b)((function(e,t){var n=e.get("currentBranch"),a=e.get("branches"),r=a.get(n),c=r.get("live"),l=e.getIn(["options","showRepo"]),o=r.get("currentIndex"),s=r.get("states").size-1;return{branches:a.keySeq(),currentBranch:n,currentIndex:o,maxIndex:s,live:c,showRepo:l}}),(function(e,t){var n=t.engine.actionFactory();return{goForward:function(t){var a=n.goForward(t);e(a)},goBack:function(t){var a=n.goBack(t);e(a)},goLive:function(){var t=n.goLive();e(t)},doShowRepo:function(t){var a=n.setOption("showRepo",t);e(a)},switchBranch:function(t){var a=n.switchBranch(t);e(a)},saveBranch:function(t){var a=n.saveBranch(t);e(a)},resetBranch:function(t){var a=n.resetBranch(t);e(a)},removeBranch:function(t){if("master"!==t){var a=n.switchBranch("master");e(a);var r=n.removeBranch(t);e(r)}}}}))(ot),it=(n(320),n(321),P(q)),ut=$(he),dt=tt(at),mt=ve(Le),ht=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(M.a)(this,Object(F.a)(t).call(this,e))).state={selectedTabIndex:n.props.state.get("selectedTabIndex")},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"updateTabIndex",value:function(e){this.setState({selectedTabIndex:e}),this.props.updateTabIndex(e)}},{key:"render",value:function(){var e=this.props.state.getIn(["settings","devMode"]);return s.a.createElement(D.d,{selectedTabClassName:"react-tabs__tab--selected Menu-selected",selectedIndex:this.state.selectedTabIndex,onSelect:this.updateTabIndex.bind(this)},s.a.createElement(D.b,{className:"Menu"},s.a.createElement(D.a,{title:"Home"},s.a.createElement(Te.a,{icon:"home"})),s.a.createElement(D.a,{title:"Dashboard"},s.a.createElement(Te.a,{icon:"chart-line"})),s.a.createElement(D.a,{title:"Connections"},s.a.createElement(Te.a,{icon:"wifi"})),s.a.createElement(D.a,{title:"Settings"},s.a.createElement(Te.a,{icon:"cog"})),s.a.createElement(D.a,{title:"Links & Credits"},s.a.createElement(Te.a,{icon:"info"})),e?s.a.createElement(D.a,{title:"State Inspector"},s.a.createElement(Te.a,{icon:"bug"})):null),s.a.createElement("hr",null),s.a.createElement(D.c,null,s.a.createElement(it,null)),s.a.createElement(D.c,null,s.a.createElement(ut,null)),s.a.createElement(D.c,null,s.a.createElement(dt,null)),s.a.createElement(D.c,null,s.a.createElement(mt,null)),s.a.createElement(D.c,null,s.a.createElement(Ve,null)),e?s.a.createElement(D.c,null,s.a.createElement(st,{engine:this.props.engine}),s.a.createElement(ct,{engine:this.props.engine})):null)}}]),t}(o.Component),pt=n(5),bt=n(4),vt=n(177);pt.b.add(bt.Z),pt.b.add(bt.s),pt.b.add(vt.a),pt.b.add(bt.t),pt.b.add(bt.l),pt.b.add(bt.Q),pt.b.add(bt.v),pt.b.add(bt.O),pt.b.add(bt.g),pt.b.add(bt.N),pt.b.add(bt.w),pt.b.add(bt.y),pt.b.add(bt.V),pt.b.add(bt.D),pt.b.add(bt.z),pt.b.add(bt.r),pt.b.add(bt.h),pt.b.add(bt.b),pt.b.add(bt.f),pt.b.add(bt.B),pt.b.add(bt.J),pt.b.add(bt.W),pt.b.add(bt.X),pt.b.add(bt.Y),pt.b.add(bt.E),pt.b.add(bt.L),pt.b.add(bt.S),pt.b.add(bt.R),pt.b.add(bt.T),pt.b.add(bt.m),pt.b.add(bt.G),pt.b.add(bt.H),pt.b.add(bt.I),pt.b.add(bt.a),pt.b.add(bt.C),pt.b.add(bt.K),pt.b.add(bt.k),pt.b.add(bt.F),pt.b.add(bt.P),pt.b.add(bt.q),pt.b.add(bt.p),pt.b.add(bt.e),pt.b.add(bt.u),pt.b.add(bt.i),pt.b.add(bt.n),pt.b.add(bt.M),pt.b.add(bt.x),pt.b.add(bt.c),pt.b.add(bt.A),pt.b.add(bt.j),pt.b.add(bt.o),pt.b.add(bt.d),pt.b.add(bt.U);n(322);var ft=function(e){function t(){return Object(R.a)(this,t),Object(M.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App-header"},s.a.createElement(W,null)),s.a.createElement(ht,this.props))}}]),t}(o.Component),gt=C.actionFactory(),Et=Object(d.b)((function(e,t){return n=t.engine.head(e),a=t.engine.live(e),{state:n,live:a};var n,a}),(function(e,t){return{updateTabIndex:function(t){return e(gt.value("selectedTabIndex",t))}}}))(ft),yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function kt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.render(s.a.createElement(d.a,{store:x},s.a.createElement(Et,{engine:C})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");yt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):kt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):kt(t,e)}))}}()}},[[182,1,2]]]);
//# sourceMappingURL=main.a7de9406.chunk.js.map